rule: L068

test_pass_one_line_subquery:
  pass_str: |
      SELECT A.SOMETHING
      FROM (SELECT B FROM D GROUP BY 1) AS A

# The fix of indentation rely on L003
# If there is a subquery inside the bracket, the fix also rely on L067
test_fail_example_in_description:
  fail_str: |
      SELECT A.SOMETHING
      FROM 
      (SELECT
              B,
              C
          FROM D GROUP BY 1)
      AS A
  fix_str: |
      SELECT A.SOMETHING
      FROM (
          SELECT
              B,
              C
          FROM D GROUP BY 1
      ) AS A

test_fail_bracket_on_one_line:
  fail_str: |
      SELECT
          A.SOMETHING
      FROM
      (SELECT B FROM D)
      as A
  fix_str: |
      SELECT A.SOMETHING
      FROM (SELECT B FROM D) AS A

# If the bracket contains more than one line, L067 and L036
test_fail_bracket_on_multiple_line:
  fail_str: |
      SELECT A.SOMETHING
      FROM
      (SELECT B, C FROM D)
      AS A
  fix_str: |
      SELECT A.SOMETHING
      FROM (
          SELECT 
              B,
              C
          FROM D
      ) AS A

test_fail_open_bracket:
  fail_str: |
      SELECT A.SOMETHING
      FROM 
          (SELECT B FROM D
      ) AS A
  fix_str: |
      SELECT A.SOMETHING
      FROM (
          SELECT B FROM D
      ) AS A

test_fail_end_bracket:
  fail_str: |
      SELECT A.SOMETHING
      FROM (SELECT
          B,
          C
          FROM D)
      AS A
  fix_str: |
      SELECT A.SOMETHING
      FROM (
          SELECT 
              B,
              C
          FROM D
      ) AS A
